<div class="app-container">
  <!-- Header Toolbar with Navigation -->
  <mat-toolbar color="primary" class="app-toolbar">
    <div class="toolbar-content">
      <div class="toolbar-left">
        <mat-icon class="toolbar-icon" aria-hidden="true">local_florist</mat-icon>
        <h1>{{ title }}</h1>
      </div>
      
      <nav class="toolbar-nav">
        <a mat-button routerLink="/home" routerLinkActive="active-link">
          <mat-icon>home</mat-icon>
          <span>My Plants</span>
        </a>
        <a mat-button routerLink="/add-plant" routerLinkActive="active-link">
          <mat-icon>add_circle</mat-icon>
          <span>Add Plant</span>
        </a>
      </nav>
      
      <div class="toolbar-stats">
        <div class="stat-item" [matBadge]="plantsNeedingWaterCount()" matBadgeColor="warn" [matBadgeHidden]="plantsNeedingWaterCount() === 0">
          <mat-icon aria-hidden="true">water_drop</mat-icon>
          <span class="stat-label">Need Water</span>
        </div>
        <div class="stat-item">
          <mat-icon aria-hidden="true">grass</mat-icon>
          <span class="stat-label">{{ totalPlants() }} Plants</span>
        </div>
      </div>
      
      <!-- Authentication Controls -->
      <div class="toolbar-auth">
        @if (isAuthenticated()) {
          <button mat-button [matMenuTriggerFor]="userMenu" class="user-button">
            <mat-icon>account_circle</mat-icon>
            <span class="user-name">{{ getUserName() }}</span>
          </button>
          <mat-menu #userMenu="matMenu">
            <div class="user-menu-header">
              <mat-icon>person</mat-icon>
              <div class="user-info">
                <span class="user-display-name">{{ getUserName() }}</span>
                <span class="user-email">{{ currentUser()?.username }}</span>
              </div>
            </div>
            <mat-divider></mat-divider>
            <button mat-menu-item (click)="logout()">
              <mat-icon>logout</mat-icon>
              <span>Sign Out</span>
            </button>
          </mat-menu>
        } @else {
          <button mat-raised-button color="accent" (click)="login()" class="login-button">
            <mat-icon>login</mat-icon>
            <span>Sign In</span>
          </button>
        }
      </div>
    </div>
  </mat-toolbar>
  
  <!-- Main Content with Router Outlet -->
  <main class="main-content">
    <router-outlet></router-outlet>
  </main>
  
  <!-- Footer -->
  <footer class="app-footer">
    <p>
      <mat-icon aria-hidden="true">favorite</mat-icon>
      Built with Angular 20 + Signals + Material Design
    </p>
    <p class="footer-subtitle">AI-Assisted Development with Claude Code & MCP Servers</p>
  </footer>
</div>
